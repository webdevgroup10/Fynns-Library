(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2706],{530899:e=>{e.exports="https://s.pinimg.com/webapp/CS-936df9f8.png"},652881:e=>{e.exports="https://s.pinimg.com/webapp/DA-7786a6fc.png"},833083:e=>{e.exports="https://s.pinimg.com/webapp/DE-1db62e2b.png"},626994:e=>{e.exports="https://s.pinimg.com/webapp/EL-8cf42788.png"},781967:e=>{e.exports="https://s.pinimg.com/webapp/EN-9e98a4a7.png"},632616:e=>{e.exports="https://s.pinimg.com/webapp/ES-25b0d4f3.png"},318250:e=>{e.exports="https://s.pinimg.com/webapp/FI-cb2571db.png"},192219:e=>{e.exports="https://s.pinimg.com/webapp/FR-b5b0c8fa.png"},203359:e=>{e.exports="https://s.pinimg.com/webapp/HU-fa536a26.png"},39303:e=>{e.exports="https://s.pinimg.com/webapp/ID-2f52d233.png"},992387:e=>{e.exports="https://s.pinimg.com/webapp/IT-2097820e.png"},358709:e=>{e.exports="https://s.pinimg.com/webapp/JA-a028a67e.png"},937155:e=>{e.exports="https://s.pinimg.com/webapp/KO-9cb16e60.png"},104461:e=>{e.exports="https://s.pinimg.com/webapp/MS-85a69c39.png"},516759:e=>{e.exports="https://s.pinimg.com/webapp/NB-de56f26b.png"},792594:e=>{e.exports="https://s.pinimg.com/webapp/NL-1c805967.png"},108842:e=>{e.exports="https://s.pinimg.com/webapp/PL-baf48928.png"},27700:e=>{e.exports="https://s.pinimg.com/webapp/PTBR-1cff8bc2.png"},871034:e=>{e.exports="https://s.pinimg.com/webapp/PTPT-0433f99a.png"},838281:e=>{e.exports="https://s.pinimg.com/webapp/RO-bff208e2.png"},355809:e=>{e.exports="https://s.pinimg.com/webapp/RU-7239de00.png"},700915:e=>{e.exports="https://s.pinimg.com/webapp/SK-747a8ad0.png"},597887:e=>{e.exports="https://s.pinimg.com/webapp/SV-70640421.png"},187504:e=>{e.exports="https://s.pinimg.com/webapp/TH-0dcefdac.png"},777140:e=>{e.exports="https://s.pinimg.com/webapp/TR-562c6827.png"},346604:e=>{e.exports="https://s.pinimg.com/webapp/UK-11d358d4.png"},1832:e=>{e.exports="https://s.pinimg.com/webapp/VI-c79a6c02.png"},847497:e=>{e.exports="https://s.pinimg.com/webapp/ZHCN-79f40009.png"},678940:e=>{e.exports="https://s.pinimg.com/webapp/ZHTW-197c7b57.png"},56528:(e,n,a)=>{a.d(n,{Z:()=>s});var t=a(214494);const s=e=>{const n=t.Z.create("ApiResource",{url:"/v3/users/password/",data:e});return e.old?n.callCreate({showError:!1}):n.callUpdate({showError:!1})}},584992:(e,n,a)=>{a.d(n,{Z:()=>N});var t=a(667294),s=a(425288),o=a(198462),r=a(729524),i=a(860273),p=a(169213),c=a(358864),d=a(558775),u=a(505771),m=a(985271),l=a(383434),y=a(543059),b=a(453821),g=a(638089),_=a(607150),f=a(790348);const h=(0,l.X)("PwtStopwatch"),T=(e,n)=>{if(m.Z){if("start"===n.type&&!e.isTiming){const{name:a,startTime:t,navigationType:s}=n;return(0,f.A9)(`TIMING.${a}`),{isTiming:!0,name:a,isSampled:n.isSampled,startTime:"number"==typeof t?t:m.Z.now(),metricId:{type:"stopwatch",name:a,navigationType:s},pwtStaticContext:n.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming){if(!n.bypassIsTimingCheck){const a=n.name||e.name;return h("ignoring action - stopwatch is not actively timing",n),(0,f.A9)(`WARN.${a}.noTiming.${n.type}`),e}h("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",n)}if("annotate"===n.type){const a=m.Z.now();return h(`adding annotation {${n.label}: ${a}}`),{...e,annotations:e.annotations.concat([{label:n.label,timestamp:a}])}}if("binaryAnnotate"===n.type)return h(`adding binary annotation {${n.name}: ${String(n.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[n.name]:{value:n.value,type:n.annotationType}}};if("binaryAnnotateOperation"===n.type){const{value:a,type:t}=n.binaryAnnotationValueAndType;if(e.binaryAnnotations[n.name]){const s=e.binaryAnnotations[n.name].value||0;return h(`operating on binary annotation {\n          name: ${n.name}\n          pervious value: ${String(s)}\n          operand: ${String(a)}\n        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,[n.name]:{value:a?n.operation(s,a):s,type:t}}}}return{...e,binaryAnnotations:{...e.binaryAnnotations,[n.name]:{value:a,type:t}}}}if("addSubspan"===n.type){h(`adding subspan {${n.name}}`);-1!==e.spans.findIndex((e=>e.name===n.name))&&h(`WARNING: adding duplicate subspan name {${n.name}}`);const a=n.id||(0,c.Z)();-1!==e.spans.findIndex((e=>e.id===a))&&h(`WARNING: adding duplicate subspan id {${n.name}: ${a}}`);let t=0;return n.startTime?t=n.startTime:e.startTime?t=e.startTime:h(`WARNING: adding subspan {${n.name}} without start time`),{...e,spans:[...e.spans,{name:n.name,id:a,startTime:t,endTime:n.endTime||1/0,annotationMap:{...n.annotations},binaryAnnotationMap:{...n.binaryAnnotations},parentId:n.parentId}]}}if("subspanStart"===n.type){var a;h(`starting subspan {${n.name}}`);-1!==e.spans.findIndex((e=>e.name===n.name))&&h(`WARNING: starting duplicate subspan name {${n.name}}`);const t=n.id||(0,c.Z)();-1!==e.spans.findIndex((e=>e.id===t))&&h(`WARNING: starting duplicate subspan id {${n.name}: ${t}}`);const s=n.parentName?null===(a=e.spans.find((e=>e.name===n.parentName)))||void 0===a?void 0:a.id:null;return{...e,spans:[...e.spans,{name:n.name,id:t,parentId:n.parentId||s,startTime:m.Z.now(),endTime:1/0,annotationMap:{...n.annotations},binaryAnnotationMap:{...n.binaryAnnotations}}]}}if("subspanStop"===n.type){if(h(`stopping subspan {${n.name}}`),!n.id){e.spans.reduce(((e,a)=>(a.name===n.name&&e.push(a),e)),[]).length>1&&(0,f.H)("duplicate_subspan_stop_name",{name:n.name,type:n.type})}const a=n.id?e.spans.findIndex((e=>e.id===n.id)):e.spans.findIndex((e=>e.name===n.name));return a>-1?(e.spans[a].endTime=m.Z.now(),n.annotations&&(e.spans[a].annotationMap={...e.spans[a].annotationMap,...n.annotations}),n.binaryAnnotations&&(e.spans[a].binaryAnnotationMap={...e.spans[a].binaryAnnotationMap,...n.binaryAnnotations})):(0,f.H)("invalid_subspan_stop_name",{name:n.name}),e}if("subspanUpdateName"===n.type){e.spans.reduce(((e,a)=>(a.name===n.currentName&&e.push(a),e)),[]).length>1&&(0,f.H)("duplicate_subspan_stop_name",{name:n.currentName,type:n.type});const a=e.spans.findIndex((e=>e.name===n.currentName));return a>-1?n.updateWhenStopwatchCompletes?e.spanNameUpdates=[...e.spanNameUpdates,{currentName:n.currentName,newName:n.newName}]:(h(`renaming subspan {${n.currentName}} to {${n.newName}}`),e.spans[a].name=n.newName):(0,f.H)("no_subspan_found_to_rename",{name:n.currentName}),e}if("stop"===n.type&&e.isTiming){const{startTime:a,metricId:t,pwtStaticContext:s,annotations:o,binaryAnnotations:p,isSampled:l,spans:f,traceId:T}=e;if(n.stopwatchPerformanceObserver&&n.stopwatchPerformanceObserver.disconnect(),l){const l=n.stopTime||m.Z.now(),A=[...f.map((n=>{n.endTime===1/0&&(n.endTime=l);const a=e.spanNameUpdates.findIndex((e=>n.name===e.currentName));return a>-1&&(h(`renaming subspan {${n.name}} to {${e.spanNameUpdates[a].newName}}`),n.name=e.spanNameUpdates[a].newName,e.spanNameUpdates=e.spanNameUpdates.filter((e=>e.newName!==n.name))),n}))];if(n.manualAndResourceSpans||0===f.length){const e=(0,c.Z)();A.push({name:"network_resources",id:e,startTime:a,endTime:l,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(n.customStopwatchBuffer||[]).map((n=>(0,u.Z)((0,b.p)(n,[]),e))).filter(Boolean))}const C="initial_app_load"===t.navigationType&&(0,i.Z)(),N={type:"COMPLETE",traceId:T,startTime:a,endTime:l,spans:A,annotationMap:{...(0,r.Z)(o),...(0,_.jh)("browser_",C?(0,_.D3)(C):{}),...(0,_.jh)("mark_",(0,y.gQ)())},binaryAnnotationMap:(0,g.ng)({metricId:t,pwtStaticContext:s,binaryAnnotations:p,performanceResourceTimings:n.customStopwatchBuffer||[]})};(0,d.Z)({metricId:t,pwtStaticContext:s,result:N})}return{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,c.Z)(),spanNameUpdates:[]}}if("error"===n.type){const{error:a,stopwatchPerformanceObserver:t}=n;return a&&(0,f.H)(a),t&&t.disconnect(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,c.Z)(),spanNameUpdates:[]}}if("abort"===n.type&&e.isTiming){n.stopwatchPerformanceObserver&&n.stopwatchPerformanceObserver.disconnect();const{metricId:a,pwtStaticContext:t}=e,s=n.reason||"";return(0,d.Z)({metricId:a,pwtStaticContext:t,result:{type:"ABORT",reason:s}}),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,c.Z)(),spanNameUpdates:[]}}}return e},A=({name:e,sampleRate:n,navigationType:a,manualAndResourceSpans:s=!1})=>{const r=(0,o.N5)(),i=(0,t.useRef)([]),d=(0,t.useRef)(null),[u,m]=(0,t.useReducer)(T,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,c.Z)(),spanNameUpdates:[]});return r?{isTiming:u.isTiming,start:t=>{if(window.PerformanceObserver){const e=1e3;i.current=[],d.current=(0,p.Z)({entryTypes:["resource"]},(n=>{i.current=i.current.concat(n.getEntries()),i.current.length>e&&(i.current=i.current.slice(-e))}))}const s={type:"start",startTime:t,name:e,navigationType:a,pwtStaticContext:r,isSampled:!n||Math.random()<n};return m(s)},stop:e=>m({type:"stop",stopTime:e,stopwatchPerformanceObserver:d.current,customStopwatchBuffer:i.current,manualAndResourceSpans:s}),error:e=>{m({type:"error",stopwatchPerformanceObserver:d.current,error:e})},abort:e=>m({type:"abort",stopwatchPerformanceObserver:d.current,customStopwatchBuffer:i.current,reason:e}),annotate:(e,n,a=!1)=>m({type:"annotate",label:e,parentId:n,bypassIsTimingCheck:a}),binaryAnnotate:(e,n,a,t,s=!1)=>m({type:"binaryAnnotate",name:e,value:n,annotationType:a,parentId:t,bypassIsTimingCheck:s}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:n,operation:a,parentId:t,bypassIsTimingCheck:s=!1})=>m({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:n,operation:a,parentId:t,bypassIsTimingCheck:s}),addSubspan:({name:e,startTime:n,endTime:a,annotations:t={},binaryAnnotations:s={},parentId:o=null,id:r=null,bypassIsTimingCheck:i=!1})=>m({type:"addSubspan",name:e,startTime:n,endTime:a,annotations:t,binaryAnnotations:s,parentId:o,id:r,bypassIsTimingCheck:i}),subspanStart:({name:e,annotations:n={},binaryAnnotations:a={},parentId:t=null,parentName:s=null,id:o=null,bypassIsTimingCheck:r=!1})=>m({type:"subspanStart",name:e,annotations:n,binaryAnnotations:a,parentId:t,parentName:s,id:o,bypassIsTimingCheck:r}),subspanStop:({name:e,annotations:n,binaryAnnotations:a,id:t,parentId:s,bypassIsTimingCheck:o=!1})=>m({type:"subspanStop",name:e,annotations:n,binaryAnnotations:a,id:t,parentId:s,bypassIsTimingCheck:o}),subspanUpdateName:({currentName:e,newName:n,bypassIsTimingCheck:a,updateWhenStopwatchCompletes:t=!0})=>m({type:"subspanUpdateName",currentName:e,newName:n,bypassIsTimingCheck:a,updateWhenStopwatchCompletes:t}),getSpans:(e,n)=>u.spans.filter((a=>a[e]===n)),getTraceId:()=>u.traceId}:null};var C=a(785893);const N=({name:e,sampleRate:n,abortOnUnloadOrClientNavigation:a=!0,navigationType:r,manualAndResourceSpans:i=!1})=>{const{Provider:p,useMaybeHook:c}=(0,s.Z)(`Stopwatch_${e}`);return{Provider:function({children:s}){const c=A({name:e,sampleRate:n,navigationType:r,manualAndResourceSpans:i}),d=(0,o.fM)(),u=d?d.time:0,m=(0,t.useRef)(!1),l=null==c?void 0:c.isTiming,y=(0,t.useCallback)((n=>{m.current?(m.current=!1,null==c||c.abort(n)):(0,f.A9)(`WARN.${e}.noTiming.abort`)}),[c]),b=(0,t.useCallback)(((e,n)=>{null==c||c.annotate(e,n)}),[c]),g=(0,t.useCallback)(((e,n,a,t)=>{null==c||c.binaryAnnotate(e,n,a,t)}),[c]),_=(0,t.useCallback)((({name:e,binaryAnnotationValueAndType:n,operation:a,parentId:t,bypassIsTimingCheck:s})=>{null==c||c.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:n,operation:a,parentId:t,bypassIsTimingCheck:s})}),[c]),h=(0,t.useCallback)((({name:e,startTime:n,endTime:a,annotations:t,binaryAnnotations:s,parentId:o,id:r,bypassIsTimingCheck:i})=>{null==c||c.addSubspan({name:e,startTime:n,endTime:a,annotations:t,binaryAnnotations:s,parentId:o,id:r,bypassIsTimingCheck:i})}),[c]),T=(0,t.useCallback)((({name:e,annotations:n,binaryAnnotations:a,parentId:t,parentName:s,id:o,bypassIsTimingCheck:r})=>{null==c||c.subspanStart({name:e,annotations:n,binaryAnnotations:a,parentId:t,parentName:s,id:o,bypassIsTimingCheck:r})}),[c]),N=(0,t.useCallback)((({name:e,annotations:n,binaryAnnotations:a,id:t,parentId:s,bypassIsTimingCheck:o})=>{null==c||c.subspanStop({name:e,annotations:n,binaryAnnotations:a,id:t,parentId:s,bypassIsTimingCheck:o})}),[c]),E=(0,t.useCallback)((({currentName:e,newName:n,bypassIsTimingCheck:a,updateWhenStopwatchCompletes:t})=>{null==c||c.subspanUpdateName({currentName:e,newName:n,bypassIsTimingCheck:a,updateWhenStopwatchCompletes:t})}),[c]),w=(0,t.useCallback)(((e,n)=>c?c.getSpans(e,n):[]),[c]),I=(0,t.useCallback)((()=>c?c.getTraceId():0),[c]),S=(0,t.useCallback)((n=>{m.current?(m.current=!1,null==c||c.error(n)):(0,f.A9)(`WARN.${e}.noTiming.error`)}),[c]),v=(0,t.useCallback)((e=>{m.current&&(null==c||c.abort("duplicated_init_stopwatch_action")),m.current=!0,null==c||c.start(e)}),[c]),R=(0,t.useCallback)((n=>{m.current?(m.current=!1,null==c||c.stop(n)):(0,f.A9)(`WARN.${e}.noTiming.stop`)}),[c]);(0,t.useEffect)((()=>()=>{a&&y("unloadOrClientNavigation")}),[u]);const O=(0,t.useMemo)((()=>({isTiming:l,abort:y,addAnnotation:b,addBinaryAnnotation:g,binaryAnnotationOperation:_,addSubspan:h,subspanStart:T,subspanStop:N,getSpans:w,getTraceId:I,updateSubspanName:E,stop:R,error:S,start:v})),[l,y,b,g,_,h,T,N,w,I,E,R,S,v]);return(0,C.jsx)(p,{value:O,children:s})},useHook:c}}},729524:(e,n,a)=>{a.d(n,{Z:()=>t});const t=e=>{let n={};e.forEach((({label:e,timestamp:a})=>{n={...n,[e]:(n[e]||[]).concat([a])}}));let a=Object.freeze({});return Object.keys(n).forEach((e=>{(n[e]||[]).forEach(((n,t)=>{const s=t?`${e}_${t+1}`:e;a={...a,[s]:n}}))})),a}},505920:(e,n,a)=>{a.d(n,{UZ:()=>u,Z8:()=>m,my:()=>l});var t=a(667294),s=(a(702664),a(214494)),o=a(425288),r=a(785893);function i(e,n,a){var t;const s=[...null!==(t=n[e][a.payload.name])&&void 0!==t?t:[],a.payload.handler],o={...n};return o[e]={...n[e],[a.payload.name]:s},o}function p(e,n,a){if(!n[e][a.payload.name])return n;const t=n[e][a.payload.name].filter((e=>e!==a.payload.handler)),s={...n};return s[e]={...n[e],[a.payload.name]:t},s}const{Provider:c,useHook:d}=(0,o.Z)("ResourceContext");function u({children:e}){const[{listeners:n,moreListeners:a},o]=(0,t.useReducer)(((e,n)=>{switch(n.type){case"addListener":return i("listeners",e,n);case"addMoreListener":return i("moreListeners",e,n);case"removeListener":return p("listeners",e,n);case"removeMoreListener":return p("moreListeners",e,n);default:return e}}),{listeners:{},moreListeners:{}});s.Z.fetchCompleteCallback=({resource:e,options:a,response:t,normalizedResponse:s,refresh:o,resourceSchema:r})=>{n[e]&&n[e].forEach((n=>n({isRefresh:o,normalizedResponse:s,options:a,schema:r,resource:e,response:t})))},s.Z.fetchMoreCompleteCallback=({resource:e,options:n,response:t,normalizedResponse:s,refresh:o,resourceSchema:r})=>{a[e]&&a[e].forEach((a=>a({isRefresh:o,normalizedResponse:s,options:n,schema:r,resource:e,response:t})))};const d=(0,t.useMemo)((()=>({listenerDispatch:o})),[]);return(0,r.jsx)(c,{value:d,children:e})}function m(e,n){const{listenerDispatch:a}=d();(0,t.useEffect)((()=>(a({type:"addListener",payload:{name:e,handler:n}}),()=>{a({type:"removeListener",payload:{name:e,handler:n}})})))}function l(e,n){const{listenerDispatch:a}=d();(0,t.useEffect)((()=>(a({type:"addMoreListener",payload:{name:e,handler:n}}),()=>{a({type:"removeMoreListener",payload:{name:e,handler:n}})})))}},784641:(e,n,a)=>{a.d(n,{E5:()=>c,T7:()=>o,Y_:()=>d,bl:()=>i,d9:()=>m,nx:()=>u,xt:()=>p});var t=a(19121),s=a(780280);a(883119);function o(e,n,a,t){const s=function(e,n){return n?"shop":0===e||2===e?"trending":1===e?"best":"article"}(e,n),o=function(e){return e.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\â€™'"]/g,"").trim().replace(/\s+/g,"-")}(a);return`/today/${s}/${encodeURIComponent(o)}/${t}/`}const r={en:["US","GB","CA","IN","AU","ID"],es:["MX","PE","AR","CL","CO","ES","VE","UY","PY","EC","BO","CR","DO","SV","GT","HN","NI","PR","PA"],pt:["BR"],de:["DE","AT","CH"],fr:["FR"],id:["ID"],ja:["JP"],it:["IT"],sv:["SE"]};function i(){var e;const n=(0,s.B)(),a=(0,t.Z)(),o=a.isAuth?a.country:n.country,i=n.locale.substring(0,2);return null===(e=r[i])||void 0===e?void 0:e.includes(o)}const p=(e,n,a)=>e||(n||a||""),c=(e,n)=>e||((null==n?void 0:n.origin_pinner)||(null==n?void 0:n.pinner)),d=e=>"todayarticle"===e.type,u=e=>Array.isArray(e)&&e.length>0&&e.every((e=>"story"===e.type)),m=e=>{var n,a;return(null!==(n=e.height)&&void 0!==n?n:1)/(null!==(a=e.width)&&void 0!==a?a:1)}},313951:(e,n,a)=>{a.d(n,{i5:()=>h,sX:()=>C,aX:()=>T,Z5:()=>f,NG:()=>A,MT:()=>N,iu:()=>E});var t=a(667294),s=a(214494),o=a(682492),r=a.n(o);const i=(e,n)=>e.data[n]&&e.data[n].messages||[];function p(e,n){const a={};return e.filter((e=>!!e)).reduce(((e,t)=>{const s=n(t);return a[s]?(r()(a[s],t),e):(a[s]=t,e.concat([t]))}),[])}function c(e){return[...e].sort(((e,n)=>new Date(e.created_ms||e.created_at)-new Date(n.created_ms||n.created_at)))}function d(e,n,a){return c(p(i(e,n).concat(a),(e=>e.id)))}const u={conversationsUnseenCount:0,data:{},newsHubCount:0,open:null,objectAttachment:null,showConversationsDropdown:!1,showNewMessageView:!1,ui:{},unread:0};function m(e=u,n){if("CONVERSATION_OPEN"===n.type)return{...e,open:n.payload.id,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[n.payload.id]:{contactRequestId:n.payload.contactRequestId||"",isPreview:n.payload.isPreview}}};if("CONVERSATION_CLOSE"===n.type)return{...e,open:null,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[n.payload.id]:{contactRequestId:n.payload.contactRequestId||"",isPreview:!1,isDeclined:n.payload.isDeclined}}};if("CONVERSATION_CREATE"===n.type){const{id:a}=n.payload;return{...e,data:{...e.data,[a]:{...e.data[a]||{},...n.payload}}}}if("CONVERSATION_DELETE"===n.type){const a={...e,data:{...e.data}},{id:t}=n.payload;return delete a.data[t],a}if("FETCH_COMPLETE"===n.type){const{options:a,resource:t,response:s}=n.payload,o=s.resource_response.data;if("ConversationMessagesResource"===t){const n=o||[],t=(null==a?void 0:a.conversation_id)||"",s=d(e,t,n),r=s[s.length-1];return{...e,data:{...e.data,[t]:{...e.data[t],id:t,messages:s,unread:0,last_message:r}}}}if("ConversationsResource"===t){const n=o||[],a={...e,data:{...e.data}};return n.forEach((e=>{const{id:n,created_at:t,name:s,board:o,emails:r,unread:i,users:p,last_message:c}=e,u=d(a,n,[c]);a.data[n]={...a.data[n],id:n,created_at:t,name:s,board:o,emails:r||[],unread:i||0,users:p||[],last_message:c,messages:u}})),a}if("ConversationResource"===t){const n=o||{},{id:a}=n,t={...e,data:{...e.data}};return a&&(t.data[a]={...t.data[a],...n}),t}if("NewsHubBadgeResource"===t){if(o){const n=o.conversations_unseen_count||0;return{...e,unread:n}}return e}}else{if("MESSAGE_SEND_PENDING"===n.type){const{id:a,message:t}=n.payload;return e.data[a]?{...e,data:{...e.data,[a]:{...e.data[a],id:a,messages:[...e.data[a].messages,t]}}}:e}if("MESSAGE_SEND_PENDING_SUCCESS"===n.type){const{id:a,tempMessage:t,newMessage:s}=n.payload;if(e.data[a]){if(i(e,a).find((e=>e.id===t.id&&e.created_ms===t.created_ms))){const n=c(p(i(e,a).filter((e=>e.id!==t.id)).concat([s]),(e=>e.id)));return{...e,data:{...e.data,[a]:{...e.data[a],last_message:s,messages:n}}}}}return e}if("MESSAGE_SEND_PENDING_FAILURE"===n.type){const{id:a,tempMessageId:t}=n.payload;if(e.data[a]){const n=i(e,a).filter((e=>e.id!==t));return{...e,data:{...e.data,[a]:{...e.data[a],messages:n}}}}return e}if("OPEN_NEW_MESSAGE"===n.type){const{objectAttachment:a}=n.payload||null;return{...e,showNewMessageView:!0,open:null,objectAttachment:a}}if("CLOSE_DROPDOWN"===n.type)return{...e,showConversationsDropdown:!1,objectAttachment:null,showNewMessageView:!1};if("OPEN_DROPDOWN"===n.type)return{...e,showConversationsDropdown:!0};if("UPDATE_NEWSHUB_COUNT"===n.type)return{...e,newsHubCount:n.payload};if("UPDATE_UNREAD_COUNT"===n.type)return{...e,conversationsUnseenCount:n.payload};if("CLEAR_MESSAGE_BADGE"===n.type){const{id:a}=n.payload;return{...e,data:{...e.data,[a]:{...e.data[a],unread:0}}}}if("CONVERSATION_SAVE_POSITION"===n.type){const{id:a,position:t}=n.payload;return{...e,data:{...e.data,[a]:{...e.data[a],position:t}}}}if("CONVERSATION_RESET_POSITION"===n.type){const{id:a}=n.payload;return{...e,data:{...e.data,[a]:{...e.data[a],position:null}}}}if("SET_OBJECT_ATTACHMENT"===n.type){const{objectAttachment:a}=n.payload;return{...e,objectAttachment:a}}if("REMOVE_OBJECT_ATTACHMENT"===n.type)return{...e,objectAttachment:null}}return e}var l=a(425288),y=a(505920),b=a(785893);const g=(()=>{let e=0;return()=>e++})(),{Provider:_,useHook:f}=(0,l.Z)("Conversations");function h({children:e}){const[n,a]=(0,t.useReducer)(m,u),o=(0,t.useCallback)((e=>a({type:"FETCH_COMPLETE",payload:e})),[]);(0,y.Z8)("ConversationMessagesResource",o),(0,y.my)("ConversationMessagesResource",o),(0,y.Z8)("ConversationsResource",o),(0,y.Z8)("ConversationResource",o),(0,y.Z8)("NewsHubBadgeResource",o);const r=(0,t.useCallback)(((e,n=!1,t="")=>a({type:"CONVERSATION_OPEN",payload:{id:e,isPreview:n,contactRequestId:t}})),[]),i=(0,t.useCallback)(((e,n="",t=!1)=>a({type:"CONVERSATION_CLOSE",payload:{id:e,contactRequestId:n,isDeclined:t}})),[]),p=(0,t.useCallback)((e=>a({type:"CONVERSATION_CREATE",payload:e})),[]),c=(0,t.useCallback)((e=>a({type:"CONVERSATION_DELETE",payload:{id:e}})),[]),d=(0,t.useCallback)(((e,n)=>a({type:"CONVERSATION_SAVE_POSITION",payload:{id:e,position:n}})),[]),l=(0,t.useCallback)((e=>a({type:"CONVERSATION_RESET_POSITION",payload:{id:e}})),[]),g=(0,t.useCallback)(((e,n,t)=>{s.Z.create("ConversationsResource",{user_ids:e,emails:n,text:""}).callCreate().then((e=>{const n=e&&e.resource_response.data;a({type:"CONVERSATION_OPEN",payload:{id:n.id}})})).catch((e=>{const n=e.message_detail||e.message||"";t(n)}))}),[]),f=(0,t.useCallback)((()=>{a({type:"CLOSE_DROPDOWN"})}),[]),h=(0,t.useCallback)((()=>{a({type:"OPEN_DROPDOWN"})}),[]),T=(0,t.useCallback)((e=>{a({type:"OPEN_NEW_MESSAGE",payload:{objectAttachment:e}})}),[]),A=(0,t.useCallback)(((e,n)=>a({type:"MESSAGE_SEND_PENDING",payload:{id:e,message:n}})),[]),C=(0,t.useCallback)(((e,n,t)=>a({type:"MESSAGE_SEND_PENDING_SUCCESS",payload:{id:e,tempMessage:n,newMessage:t}})),[]),N=(0,t.useCallback)(((e,n)=>a({type:"MESSAGE_SEND_PENDING_FAILURE",payload:{id:e,tempMessageId:n}})),[]),E=(0,t.useCallback)((e=>a({type:"UPDATE_NEWSHUB_COUNT",payload:e})),[]),w=(0,t.useCallback)((e=>a({type:"UPDATE_UNREAD_COUNT",payload:e})),[]),I=(0,t.useCallback)((e=>a({type:"CLEAR_MESSAGE_BADGE",payload:{id:e}})),[]),S=(0,t.useCallback)((e=>a({type:"SET_OBJECT_ATTACHMENT",payload:{objectAttachment:e}})),[]),v=(0,t.useCallback)((()=>a({type:"REMOVE_OBJECT_ATTACHMENT"})),[]),R=(0,t.useMemo)((()=>({clearMessageBadge:I,conversationOpen:r,conversationClose:i,conversationCreate:p,conversationDelete:c,conversationGet:g,saveConversationPosition:d,resetConversationPosition:l,dropdownClose:f,dropdownOpen:h,newMessageOpen:T,pendingMessageSend:A,pendingMessageSuccess:C,pendingMessageFailure:N,updateNewsHubCount:E,updateUnreadCount:w,conversations:n,setObjectAttachment:S,removeObjectAttachment:v})),[I,r,i,p,c,g,d,l,f,h,T,A,C,N,E,w,n,S,v]);return(0,b.jsx)(_,{value:R,children:e})}function T(){const{conversationCreate:e}=f();return async n=>{let a;const t=s.Z.create("ConversationsResource",n);try{var o;const n=null===(o=(await t.callCreate()).resource_response)||void 0===o?void 0:o.data;n&&(e(n),a=n)}catch(r){throw new Error(r.message)}return a}}function A(){const{conversations:e,conversationCreate:n,pendingMessageSend:a,pendingMessageSuccess:t,pendingMessageFailure:o}=f();return async(r,i,p,c)=>{const{text:d,pinId:u,boardId:m,userId:l,didItId:y}=i;async function b(){const e=s.Z.create("ConversationMessagesResource",{conversation_id:r,text:d,pin:u,board:m,user:l,user_did_it_data:y,source:p}),n=`${g()}`,i={text:d,sender:c,created_at:(new Date).toString(),created_ms:Date.now(),id:n,type:"tempMessage"};a(r,i);try{var b;const n=null===(b=(await e.callCreate()).resource_response)||void 0===b?void 0:b.data;n&&t(r,i,n)}catch(_){throw o(r,n),new Error(_.message)}}if(e.data[r])await b();else{const e=s.Z.create("ConversationResource",{conversation_id:r});try{var _;const a=null===(_=(await e.callGet()).resource_response)||void 0===_?void 0:_.data;a&&(n(a),await b())}catch(f){throw new Error(f.message)}}}}function C(e){const{conversations:n}=f();return n.data[e]}function N(e){const{conversations:n}=f();return n.ui[e]||{contactRequestId:"",isDeclined:!1,isPreview:!1}}function E(){const{conversations:{data:e}}=f(),n=(a=e,Object.keys(a).map((e=>a[e]))).filter((e=>e.users&&e.last_message));var a,t;return t=n,Array.from(t).sort(((e,n)=>new Date((n.last_message||n).created_at)-new Date((e.last_message||e).created_at)))}},205992:(e,n,a)=>{a.d(n,{Cp:()=>l,GT:()=>p,V6:()=>r,W6:()=>y,_L:()=>m,fm:()=>i,hT:()=>c});var t=a(56528),s=a(214494),o=a(248327);function r(e,n){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:n}}}const i=e=>({type:"USER_DOMAIN_VERIFIED",payload:{verifiedWebsite:e}}),p=e=>({type:"USER_DOMAIN_UNVERIFIED",payload:{verifiedWebsite:e}});function c(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}const d=(e,n,a)=>t=>{t({type:"USER_SETTING_CHANGE",payload:{id:e,field:n,value:a}})},u=e=>{const n=e.split(" ");return{first_name:n[0],last_name:n[1]}},m=({field:e,value:n,onSettingSavedHn:a,showErrorHn:t,surfaceTag:r,userId:i})=>(p,c)=>{const m=c().users[i],l={user_id:i,surface_tag:r};if("full_name"===e)if(m.is_partner)l.business_name=n;else{const e=u(n);l.first_name=e.first_name,l.last_name=e.last_name||""}else l[e]=n;s.Z.create("UserSettingsResource",l).callUpdate().then((()=>{if("profile_image_url"===e)p((0,o.b)("UserResource",{options:l}));else if("full_name"===e)if(m.is_partner)p(d(i,"first_name",n));else{const e=u(n);p(d(i,"first_name",e.first_name)),p(d(i,"last_name",e.last_name))}!m.is_partner||"account_type"!==e&&"contact_name"!==e?p(d(i,e,n)):p(((e,n,a)=>t=>{t({type:"USER_PARTNER_SETTING_CHANGE",payload:{id:e,field:n,value:a}})})(i,e,n)),a()}),t)},l=(e,n,a,s,o)=>()=>{(0,t.Z)({new:n,new_confirm:a,old:e}).then(s,o)},y=(e,n,a,t,o,r)=>i=>{i(d(e,`${n}.${a}`,t));let p={},c="EmailSettingsResource";void 0!==o?(p={section:n,option:a,value:t,od:o.od,user_id:o.user_id},c="UnsubEmailSettingsResource"):p={section:n,option:a,value:t},s.Z.create(c,p).callUpdate().then(r).catch((()=>i(d(e,`${n}.${a}`,!t))))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/2706-2e9199b2b96029c8.mjs.map